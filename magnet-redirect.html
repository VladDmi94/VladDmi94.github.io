<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Magnet Redirect</title>
<link rel="icon" type="image/png" href="images/favicon.png">
<style>
  body {
    background-color: #000;
    color: #ccc;
    font-family: sans-serif;
    text-align: center;
    padding: 20px;
  }
  a { color: #4da3ff; }
  #link {
    word-break: break-all;
    display: block;
    margin-top: 10px;
  }
</style>
</head>
<body>
Редирект на
<a id="link" href="#"></a>

<script>
function redirect() {
  let h = decodeURIComponent(location.hash.slice(1));
  if (!h) {
    document.body.innerHTML = "Нужно добавить magnet ссылку или info-hash в конце после https://vladdmi94.github.io/magnet-redirect.html#";
    return;
  }
  if (!h.startsWith("magnet:?")) {
    h = "magnet:?xt=urn:btih:" + h;
  }
  const linkElem = document.getElementById('link');
  linkElem.textContent = h;
  linkElem.href = h;
  location.href = h;
}
window.onload = window.onhashchange = redirect;
</script>
</body>
</html>
